<!DOCTYPE HTML>
<html lang="en">
    <head>
      	<meta charset="UTF-8" />
      	
    	<title>Germaniastrat Project</title>
    	
		<script src='src/lib/jquery-2.1.1.min.js'></script>
        <script src='src/lib/createjs-2013.12.12.min.js'></script>
        
		<script src='src/data/cards.js'></script>
		<script src='src/data/territories.js'></script>
		<script src='src/data/territoryTypes.js'></script>
		
		<script src='src/models/Battlegroup.js'></script>
		<script src='src/models/Card.js'></script>
		<script src='src/models/Unit.js'></script>
		<script src='src/models/WorldM.js'></script>
		<script src='src/models/TerritoryM.js'></script>
		
		<script src='src/views/WorldV.js'></script>
		<script src='src/views/TerritoryV.js'></script>
		<script src='src/views/WorldButton.js'></script>
		
		<script src='src/manipulators/World.js'></script>
		<script src='src/manipulators/Germania.js'></script>
		
        <script src='src/ui/UI.js'></script>
      	
    </head>
    
    <body onLoad="init();">
      	<script>
      	    var card = new Card( RIFLEMAN_UNIT );
      	    var unit1 = new Unit( card );
      	    unit1.init( { condition:100, experience: 50, cargo:{ food:0, ammo:0, fuel:0 } } );
      	    
      	    var unit2 = new Unit( card );
      	    unit2.init( { condition:100, experience: 50, cargo:{ food:0, ammo:0, fuel:0 } } );
      	    
      	    var unit3 = new Unit( card );
      	    unit3.init( { condition:100, experience: 50, cargo:{ food:0, ammo:0, fuel:0 } } );
      	    
      	    var battlegroup = new Battlegroup();
      	    battlegroup.init( { name:"56th Tank Hunters", units:[] } );
      	    
      	    //alert( JSON.stringify( battlegroup.getCargo() ) );
      	    //alert( JSON.stringify( battlegroup.getAttributes() ) );
      	    
      	    battlegroup.addUnit( unit1 );
      	    battlegroup.addUnit( unit2 );
      	    battlegroup.addUnit( unit3 );
      	    
      	    //alert( battlegroup.units.length );
            
            //alert( JSON.stringify( battlegroup.getCargo() ) );
            //alert( JSON.stringify( battlegroup.getAttributes() ) );




            //var flag = false;
            
            var x = 0;
            var y = 0;
            var world, stage;
            
            var init = function() 
            {
                // create a new stage (canvas).
                stage = new createjs.Stage( "world" );
                stage.mouseDownFlag = false;
                stage.mouseMoveFlag = false;
                
                var tick = function( evt )
                {
                    stage.update( evt );
                };
                
                //createjs.Ticker.setFPS( 30 );
                //createjs.Ticker.addEventListener( "tick", tick );

                // enable touch events.
                createjs.Touch.enable( stage );

                // to get onMouseOver & onMouseOut events, we need to enable them on the stage:
                stage.enableMouseOver();
                
                var container = new createjs.Container();
                container.name = "CONTAINER"
                
                var background = new createjs.Shape();
                var width = stage.canvas.width;
                var height = stage.canvas.height;
                background.graphics.beginStroke("red").beginFill( "white" ).drawRect(0, 0, width, height);
                background.name = "BACKGROUND";
                container.addChild( background );
                
                stage.addChild( container );
                
                
                
                
                
                
                // draggable interface for scrolling.
                //______________________________________________________________
                var stagemousemove = function( evt )
                { 
                    if( stage.mouseDownFlag )
                    {
                        stage.mouseMoveFlag = true;
                        
                        var currentPointerX = evt.stageX;
                        var currentPointerY = evt.stageY;
                        
                        var currentTargetX = evt.currentTarget.x;
                        var currentTargetY = evt.currentTarget.y;
                        
                        evt.currentTarget.x = (currentPointerX - x) + currentTargetX;
				        evt.currentTarget.y = (currentPointerY - y) + currentTargetY;
                        
                        x = currentPointerX;
                        y = currentPointerY;
                        
                        stage.update( evt );
                    }
                };
                
                var stagemousedown = function( evt )
                { 
                    // save the current mouse coordinates for later.
                    x = evt.stageX; 
                    y = evt.stageY;
                    
                    stage.mouseDownFlag = true;
                };
                
                var stagemouseup = function( evt )
                { 
                    stage.mouseDownFlag = false;
                    stage.mouseMoveFlag = false;
                };
                
                
                stage.on( "stagemousemove", stagemousemove );
                stage.on( "stagemousedown", stagemousedown );
                stage.on( "stagemouseup", stagemouseup );
                
                //______________________________________________________________
                
                
                var world = new World( null, stage );
                stage.update();
            };
		
      	</script>

    	<canvas id="world" width="800" height="600" style="background-color: black;">
            WTF just happened here...?
    	</canvas>
    </body>
</html>
